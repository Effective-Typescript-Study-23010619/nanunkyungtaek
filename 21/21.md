# 21. 타입 넓히기

## “타입 넓히기” 란?

- 타입스크립트는 상수를 사용해서 변수를 초기화 할 때 타입을 명시하지 않으면 지정된 단일 값으로 할당 가능한 값 들의 집합을 유추하게 되고 이 과정을 “타입 넓히기” 라고 한다.
- 타입스크립트가 작성자의 의도를 추측해서 타입을 추론하지만 그 추측이 항상 옳을 수는 없으므로 타입 넓히기의 과정을 제어할 수 있도록 몇 가지 방법을 사용할 수 있다.

## 타입 넓히기를 제어하기 위한 방법

- `const` 사용하기
    - `const` 선언문을 사용하면 문자 리터럴 타입이나 숫자 리터럴 타입은 재할당이 불가함으로 더 좁은 타입으로 추론 될 수 있다.
    - **But**, 배열이나 객체는 `const` 로 선언해도 값이 변경될 수 있기 때문에 객체의 경우 “타입 넓히기”가 각 요소가 `let` 선언문으로 할당된 것 처럼 다룬다.
    
    ```tsx
    const v = {
    	x: 1
    };
    // 즉, {[key: string]: number} 처럼 동작.
    ```
    
    - Q. let 처럼 동작하는데 왜 number → string 형식으로 변경 안될까?
        
        A. 타입의 변경이 아닌 값의 변경이 자유롭다. 즉, `const로 x = ‘x’` 를 선언했을 때는 x 의 타입은 string이 아닌 ‘x’로 좁혀지는데 객체로 `const v = { x: 1}` 을 선언했을때는 1의 타입을 갖는것이 아닌 타입 넓히기가 동작해서 number 타입으로 추론된다.
        
- 명시적 타입 구문을 제공하거나 const 단언문을 사용해서 좁은 타입, 내가 원하는 형태의 타입으로 만들 수도 있다.

```ts
// 명시적 타입 구문 제공
const v: {x: 1 | 3 | 5} = {
	x: 1
}; // x의 타입이 1이나 3이나 5

// const 단언문 사용
const v2 = {
	x: 1 as const,
	y: 2
}; // 타입은 {x: 1, y:number} 로 추론

const v3 = {
	x: 1,
	y: 3
} as const; // 타입은 {readonly x: 1, readonly y: 3}
```